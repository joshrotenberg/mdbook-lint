# Configuration for release-plz
# https://release-plz.dev/docs/config
#
# Changelog generation is configured in cliff.toml (git-cliff)

[workspace]
# Don't update all dependencies automatically
dependencies_update = false

# Publishing to crates.io
publish = true

# Increased timeout for publishing multiple crates
publish_timeout = "15m"

# Only create a single tag/release for the workspace after all crates are published
git_release_enable = true
git_tag_enable = true
git_tag_name = "v{{ version }}"

# Safer for workspace projects - don't always release
release_always = false

# Enable changelog generation for release notes
changelog_update = true

# Git release body template
git_release_body = """
{{ changelog }}

**Full Changelog**: https://github.com/joshrotenberg/mdbook-lint/compare/{{ previous_tag }}...{{ tag }}
"""

# Main CLI package creates the GitHub release, tag, and CHANGELOG.md
[[package]]
name = "mdbook-lint"
git_release_enable = true
git_tag_enable = true
changelog_update = true
changelog_path = "CHANGELOG.md"

# Library packages don't create releases/tags (only published to crates.io)
[[package]]
name = "mdbook-lint-core"
git_release_enable = false
git_tag_enable = false
changelog_update = false

[[package]]
name = "mdbook-lint-rulesets"
git_release_enable = false
git_tag_enable = false
changelog_update = false
