# Configuration for release-plz
# https://release-plz.dev/docs/config

[workspace]
# Don't update all dependencies automatically
dependencies_update = false

# Use git-cliff for changelog generation
changelog_config = "cliff.toml"

# Publishing to crates.io
publish = true

# Increased timeout for publishing multiple crates
publish_timeout = "15m"

# Create tags but NOT GitHub releases (cargo-dist handles releases)
git_release_enable = false
git_tag_enable = true
git_tag_name = "v{{ version }}"

# Safer for workspace projects - don't always release
release_always = false

# Enable changelog generation for release notes
changelog_update = true

# Main CLI package creates the tag and CHANGELOG.md
# GitHub release is created by cargo-dist workflow
[[package]]
name = "mdbook-lint"
git_release_enable = false
git_tag_enable = true
changelog_update = true
changelog_path = "CHANGELOG.md"
# Include commits from dependency crates in the main changelog
# Without this, commits that only touch rulesets or core won't appear
changelog_include = ["mdbook-lint-core", "mdbook-lint-rulesets"]

# Library packages don't create releases/tags (only published to crates.io)
[[package]]
name = "mdbook-lint-core"
git_release_enable = false
git_tag_enable = false
changelog_update = false

[[package]]
name = "mdbook-lint-rulesets"
git_release_enable = false
git_tag_enable = false
changelog_update = false
